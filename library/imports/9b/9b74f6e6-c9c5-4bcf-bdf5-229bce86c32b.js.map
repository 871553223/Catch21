{"version":3,"sources":["assets/Script/ContainerPrefabScript.js"],"names":["cc","Class","Component","properties","ScoreRect","type","Sprite","ScoreLabel","Label","UpTip","onLoad","string","start","onClick","target","_this","mainJS","find","getComponent","pokerNode","CurrentPoker","node","poker","childrenCount","children","feipai","currentTarget","log","PokerRealNumber","sum","parseInt","Tools","ScaleAnimation","toString","PokerInstanceBackground","frontPoker","fanzhuan","nodeParent","nodeSon","curPos1","convertToWorldSpaceAR","v2","curPos2","d2","delayTime","mvto","moveBy","x","y","animationFinished","callFunc","pos1","pos2","convertToNodeSpaceAR","setPosition","PreviousParent","parent","PreviousPosition","CurrentPosition","Button","interactable","sequ","sequence","runAction"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        ScoreRect: {\n            type:cc.Sprite,\n            default:null\n        },\n        ScoreLabel: {\n            type:cc.Label,\n            default:null\n        },\n        UpTip: {\n            type:cc.Sprite,\n            default:null\n        }\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.ScoreLabel.string = '0';\n    },\n\n    start () {\n\n    },\n\n    onClick:function(target) {\n        var _this = this;\n        var mainJS = cc.find('Canvas').getComponent('GameSceneScript');\n        var pokerNode = mainJS.CurrentPoker.node;\n\n        var poker;\n        if (pokerNode.childrenCount > 0) {\n            poker = pokerNode.children[pokerNode.childrenCount - 1];\n            // _this.feipai(target.target,poker);\n            _this.feipai(target.currentTarget,poker);\n            cc.log(\"RealNumber:\" + poker.PokerRealNumber);\n            var sum = parseInt(this.ScoreLabel.string) + poker.PokerRealNumber;\n            if (sum === 21) {\n                \n            } else if (sum > 21) {\n\n            }\n            var Tools = cc.find('Canvas').getComponent('ToolsScript');\n            Tools.ScaleAnimation(_this.ScoreLabel);\n            // cc.log(\"最终分\"+sum);\n            _this.ScoreLabel.string = sum.toString();\n            // 执行牌局跟进\n            cc.log(mainJS.PokerInstanceBackground.node.children);\n            var frontPoker = mainJS.PokerInstanceBackground.node.children[mainJS.PokerInstanceBackground.node.childrenCount - 1];\n            cc.log(frontPoker);\n            mainJS.fanzhuan(frontPoker);\n        }\n        \n        // if (mainJS.CurrentPoker.node) {\n            \n        // }\n        \n        // var curPos1 = target.convertToWorldSpaceAR(cc.v2(0,0));\n        //     var curPos2 = _this.PokerInstanceBackground.node.convertToNodeSpaceAR(curPos1);\n        //     cc.log(target);\n        //     target.setPosition(curPos2);\n        //     target.parent = _this.PokerInstanceBackground.node;\n        //     target.CurrentPosition = curPos1;\n        \n    },\n    // 动画从子节点飞到父节点身上\n    feipai: function (nodeParent,nodeSon) {\n        cc.log(nodeParent,nodeSon);\n        var curPos1 = nodeSon.convertToWorldSpaceAR(cc.v2(0,0));\n        var curPos2 = nodeParent.convertToWorldSpaceAR(cc.v2(0,0));\n        var _this = this;\n        var d2 = cc.delayTime(0.01);\n        var mvto = cc.moveBy(0.2, cc.v2(curPos2.x - curPos1.x,curPos2.y - curPos1.y + 175 - (45 * nodeParent.childrenCount)));\n        var animationFinished = cc.callFunc(function(target) {\n            // target.CurrentPosition = target.getPosition();\n            \n            // var curPos1 = target.convertToWorldSpaceAR(cc.v2(0,0));\n            // var curPos2 = _this.CurrentPoker.node.convertToNodeSpaceAR(curPos1);\n            // cc.log(target);\n            // target.setPosition(curPos2);\n            // target.parent = _this.CurrentPoker.node;\n            // // cc.log(target.CurrentPosition);\n            // target.PreviousPosition = target.CurrentPosition;\n            // target.CurrentPosition = curPos1;\n            var pos1 = target.convertToWorldSpaceAR(cc.v2(0,0));\n            var pos2 = nodeParent.convertToNodeSpaceAR(pos1);\n            target.setPosition(pos2);\n            target.PreviousParent = target.parent;\n            target.parent = nodeParent;\n            target.PreviousPosition = target.CurrentPosition;\n            target.CurrentPosition = pos1;\n            cc.log(nodeParent.children);\n            target.getComponent(cc.Button).interactable = false;\n            // target.interactable = false;\n\n        });\n        var sequ = cc.sequence([d2,mvto,animationFinished]);\n        nodeSon.runAction(sequ);\n    }\n\n    // update (dt) {},\n});\n"]}