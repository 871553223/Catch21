{"version":3,"sources":["assets/Script/GameSceneScript.js"],"names":["cc","Class","Component","properties","leftSeconds","type","integer","backgroundSong","AudioClip","PauseButton","Button","HelpButton","AudioButton","ReBackButton","TimeCountLabel","RoundLabel","ScoreLabel","PokerContainer","Prefab","myPoker","PokerInstanceBackground","Sprite","PokerStashView","CurrentPoker","onLoad","audioEngine","playMusic","size","view","getFrameSize","log","width","height","windowSize","getVisibleSize","halfWidth","halfHeight","pauseSize","node","getBoundingBox","setAnchorPoint","setPosition","labelNode","getChildByName","label","getComponent","Label","string","bg","firstR","i","pre","instantiate","_name","addChild","array","pokerRandom","PokerNumber","active","index","childrenCount","start","Tools","find","fapai","_this","director","getScheduler","schedule","timeString","FormatMMSS","seq","lastPocker","currentPoker","fanzhuan","end_func","callFunc","target","base_count","parseInt","split","curPos1","convertToWorldSpaceAR","v2","curPos2","convertToNodeSpaceAR","PreviousParent","parent","CurrentPosition","bind","mto","moveTo","d1","delayTime","seque","sequence","runAction","pokernode","pos1","pos2","moveBy","x","y","fan1","scaleTo","changeFront","spawn","d2","fan2","animationFinished","getPosition","PreviousPosition","sequ","Array","num","randomNum","indexOf","push","length","minNum","maxNum","Math","floor","random","StashClick","staBut","mainJS","pokerNode","BackgroundView","currentTarget","poker","children","pos3","totation","rotateTo","curPos3","interactable","frontPoker","stashAnimation","condition"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        leftSeconds: {\n            type:cc.integer,\n            default:90\n        },\n\n        backgroundSong: {\n            type:cc.AudioClip,\n            default:null\n        },\n        PauseButton: {\n            type:cc.Button,\n            default:null\n        },\n        HelpButton: {\n            type:cc.Button,\n            default:null\n        },\n        AudioButton: {\n            type:cc.Button,\n            default:null\n        },\n        ReBackButton: {\n            type:cc.Button,\n            default:null\n        },\n\n        TimeCountLabel: {\n            type:cc.Button,\n            default:null\n        },\n        RoundLabel: {\n            type:cc.Button,\n            default:null\n        },\n        ScoreLabel: {\n            type:cc.Button,\n            default:null\n        },\n\n        PokerContainer: {\n            type:cc.Prefab,\n            default:null\n        },\n\n        myPoker: {\n            type:cc.Prefab,\n            default:null\n        },\n\n        PokerInstanceBackground: {\n            type:cc.Sprite,\n            default:null\n        },\n\n        PokerStashView: {\n            type:cc.Button,\n            default:null\n        },\n\n        CurrentPoker: {\n            type:cc.Sprite,\n            default:null\n        }\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        cc.audioEngine.playMusic(this.backgroundSong,true)\n        let size = cc.view.getFrameSize();\n        cc.log(size.width,size.height)\n        let windowSize = cc.view.getVisibleSize();\n        cc.log(windowSize.width,windowSize.height);\n\n        var halfWidth = windowSize.width / 2;\n        var halfHeight = windowSize.height / 2;\n        \n        var pauseSize = this.PauseButton.node.getBoundingBox();\n        this.PauseButton.node.setAnchorPoint(0,0);\n        this.PauseButton.node.setPosition(-halfWidth + 40,-halfHeight + 30)\n\n        this.HelpButton.node.setAnchorPoint(0,0);\n        this.HelpButton.node.setPosition(-87 - 40,-halfHeight + 11 + 30)\n\n        this.AudioButton.node.setAnchorPoint(0,0);\n        this.AudioButton.node.setPosition(40,-halfHeight + 11 + 30)\n\n        this.ReBackButton.node.setAnchorPoint(0,0);\n        this.ReBackButton.node.setPosition(halfWidth - 40 - 110,-halfHeight + 30)\n\n        this.TimeCountLabel.node.setAnchorPoint(1,0);\n        this.TimeCountLabel.node.setPosition(0-107,halfHeight - 90 - 50)\n        var labelNode = this.TimeCountLabel.node.getChildByName(\"Background\").getChildByName(\"Label\");\n        var label = labelNode.getComponent(cc.Label);\n        label.string = this.leftSeconds;\n\n        this.RoundLabel.node.setAnchorPoint(0.5,0);\n        this.RoundLabel.node.setPosition(0,halfHeight - 90 - 50)\n        var bg = this.RoundLabel.node.getChildByName(\"Background\");\n        var firstR = bg.getChildByName(\"FirstRound\");\n        // firstR.node.opacity = 0;\n        // bg.getChildByName(\"FirstRound\").node.hi = false;\n        // cc.log(bg.getChildByName(\"FirstRound\"));\n        // this.RoundLabel.node.getChildByName(\"Background\").node.getChildByName(\"FirstRound\").active = false;\n        // this.RoundLabel.node.getChildByName(\"Background\").node.getChildByName(\"FirstRound\").node.active = false;\n\n        this.ScoreLabel.node.setAnchorPoint(0,0);\n        this.ScoreLabel.node.setPosition(107,halfHeight - 90 - 50)\n\n        this.PokerInstanceBackground.node.setAnchorPoint(0.5,0.5);\n        // cc.log(this.PokerInstanceBackground.node.getContentSize().width,this.PokerInstanceBackground.node.getContentSize().height);\n        // cc.log(this.PokerInstanceBackground.node.getBoundingBox().size.width,this.PokerInstanceBackground.node.getBoundingBox().size.height);\n        this.PokerInstanceBackground.node.setPosition(-halfWidth + 130 + 20,-halfHeight + 93 + 160);\n\n        \n        this.CurrentPoker.node.setAnchorPoint(0,0.5);\n        this.CurrentPoker.node.setPosition(0,-halfHeight + 95 + 160);\n\n        this.PokerStashView.node.setAnchorPoint(1,1);\n        this.PokerStashView.node.setPosition(halfWidth - 10,-halfHeight + 190 + 160);\n\n\n        for (var i = 0; i < 4; i++) {\n            let pre = cc.instantiate(this.PokerContainer);\n            pre._name=\"CJH\"\n            this.node.addChild(pre);\n            pre.setAnchorPoint(0.5,0.5);\n            pre.setPosition(-halfWidth + 78 + 60 + 157*i,0);\n        }\n        var array = this.pokerRandom();\n        for (let i = 0; i < 52; i++) {\n            let pre = cc.instantiate(this.myPoker);\n            pre.PokerNumber = array[i];\n            // cc.log(\"PokerInit\"+pre.PokerNumber);\n            // cc.log(\"dianshu\"+pre.PokerNumber);\n            pre._name=\"Poker_\"+i;\n            this.node.addChild(pre);\n            pre.getChildByName(\"FrontView\").active = false;\n            pre.setAnchorPoint(0.5,0.5);\n            pre.setPosition(0,0 - 200);\n        }\n\n        for (let index = 0; index < this.node.childrenCount; index++) {\n            \n            // cc.log(this.node.children[index]);\n            \n        }\n\n        \n    },\n\n    start () {\n\n        var Tools = cc.find('Canvas').getComponent('ToolsScript');\n        var bg = this.RoundLabel.node.getChildByName(\"Background\");\n        bg.getChildByName(\"FirstRound\").active = false;\n        bg.getChildByName(\"SecondRound\").active = false;\n        bg.getChildByName(\"ThirdRound\").active = false;\n        this.fapai(0);\n        \n        \n        var _this = this;\n        cc.director.getScheduler().schedule(function(){\n            var labelNode = this.TimeCountLabel.node.getChildByName(\"Background\").getChildByName(\"Label\");\n            var label = labelNode.getComponent(cc.Label);\n            var timeString = Tools.FormatMMSS(_this.leftSeconds);\n            cc.log(timeString);\n            label.string = timeString;\n            _this.leftSeconds --;\n            // cc.log(_this.leftSeconds)\n        },this,1,100,1,false);\n    },\n// 发牌函数\n    fapai:function(seq) {\n\n        var _this = this;\n        let size = cc.view.getVisibleSize();\n        let lastPocker = _this.PokerInstanceBackground.node.getChildByName(\"Poker_\"+(seq - 1));\n        let currentPoker = _this.node.getChildByName(\"Poker_\"+seq);\n        if (currentPoker === null) {\n            cc.log(\"Test\",lastPocker,currentPoker);\n            _this.fanzhuan(lastPocker);\n            return;\n        }\n        \n        // 回调\n        var end_func = cc.callFunc(function(target) {\n            var base_count = parseInt(target._name.split(\"_\")[1]) + 1;\n\n            var curPos1 = target.convertToWorldSpaceAR(cc.v2(0,0));\n            var curPos2 = _this.PokerInstanceBackground.node.convertToNodeSpaceAR(curPos1);\n            // cc.log(target);\n            target.setPosition(curPos2);\n            target.PreviousParent = target.parent;\n            target.parent = _this.PokerInstanceBackground.node;\n            target.CurrentPosition = curPos1;\n            _this.fapai(base_count);\n\n        }.bind(currentPoker))\n\n        var mto = cc.moveTo(0.05, cc.v2((-size.width / 2)+ 20 + 72+2.2*seq,(-size.height / 2) + 95 + 160));\n        var d1 = cc.delayTime(0.01);\n        var seque = cc.sequence([d1, mto, end_func]);\n        currentPoker.runAction(seque);\n        \n    },\n\n    fanzhuan:function(pokernode) {\n        let size = cc.view.getVisibleSize();\n        var _this = this;\n        // 先反转90变正面数据，再反转-90回来，结束，整个过程移动牌面到指定位置\n        var d1 = cc.delayTime(0.01);\n        // var mto = cc.moveTo(0.3, cc.v2(0 + 69,(-size.height / 2) + 95 + 160));\n\n        var pos1 = pokernode.convertToWorldSpaceAR(cc.v2(0,0));\n        var pos2 = _this.CurrentPoker.node.convertToWorldSpaceAR(cc.v2(0,0));\n        var mto = cc.moveBy(0.15, cc.v2(pos2.x - pos1.x + 66,pos2.y - pos1.y));\n        var fan1 = cc.scaleTo(0.15, 0.2, 1);\n        var changeFront = cc.callFunc(function(target) {\n            target.getChildByName(\"FrontView\").active = true;\n            target.getChildByName(\"Background\").active = false;\n        });\n        \n        var spawn = cc.spawn([mto,fan1]);\n        pokernode.runAction(spawn);\n        var d2 = cc.delayTime(0.15);\n        var fan2 = cc.scaleTo(0.1, 1, 1);\n        var animationFinished = cc.callFunc(function(target) {\n            target.CurrentPosition = target.getPosition();\n            \n            var curPos1 = target.convertToWorldSpaceAR(cc.v2(0,0));\n            var curPos2 = _this.CurrentPoker.node.convertToNodeSpaceAR(curPos1);\n            // cc.log(target);\n            target.setPosition(curPos2);\n            target.PreviousParent = target.parent;\n            target.parent = _this.CurrentPoker.node;\n            // cc.log(target.CurrentPosition);\n            target.PreviousPosition = target.CurrentPosition;\n            target.CurrentPosition = curPos1;\n        });\n        var sequ = cc.sequence([d2,changeFront,fan2,animationFinished]);\n        pokernode.runAction(sequ);\n\n        // var d3 = cc.delayTime(1.3);\n        // var destroyPokerNode = cc.callFunc(function(target) {\n        //     target.removeFromParent(true);\n        //     target.destroy();\n        // });\n        // var sequ2 = cc.sequence([d3,destroyPokerNode]);\n        // pokernode.runAction(sequ2);\n    },\n\n\n    pokerRandom:function() {\n        var array = new Array();\n        do {\n            var num = this.randomNum(1,53);\n            if (array.indexOf(num) === -1) {\n                array.push(num);\n            } else {\n                var index = array.indexOf(num);\n            }\n        } while (array.length < 52);\n        return array;\n    },\n    //生成从minNum到maxNum的随机数\n    randomNum:function(minNum, maxNum) {\n        var num = Math.floor(Math.random()*(minNum - maxNum) + maxNum);\n        return num;\n    },\n\n    StashClick:function (staBut) {\n        var _this = this;\n        var mainJS = cc.find('Canvas').getComponent('GameSceneScript');\n        var pokerNode = mainJS.CurrentPoker.node;\n        var BackgroundView = staBut.currentTarget.getChildByName('Background');\n        if (BackgroundView.childrenCount > 0) {\n\n\n\n            if (pokerNode.childrenCount > 0) {\n                cc.log(\"中间节点被占了,需要先执行中间卡牌动画\");\n            } else {\n                \n            }\n\n\n            // 执行回转动画\n            var poker = BackgroundView.children[0];\n            // 先切换挂载的节点\n            // var curPos1 = poker.convertToWorldSpaceAR(cc.v2(0,0));\n            // var curPos3 = pokerNode.convertToWorldSpaceAR(cc.v2(0,0));\n            // poker.setPosition(cc.v2(curPos1.x - curPos3.x,curPos1.y - curPos3.y));\n            // poker.parent = pokerNode;\n\n            \n            // var pos1 = poker.convertToWorldSpaceAR(cc.v2(0,0));\n            // var pos2 = pokerNode.convertToWorldSpaceAR(cc.v2(0,0));\n            // var mto = cc.moveBy(0.3, cc.v2(pos2.x - pos1.x + 65,pos2.y - pos1.y));\n            // var totation = cc.rotateTo(0.3,0);\n            // var spawn = cc.spawn([mto,totation]);\n            // poker.runAction(spawn);\n\n\n            var pos1 = poker.convertToWorldSpaceAR(cc.v2(0,0));\n            var pos3 = pokerNode.convertToWorldSpaceAR(cc.v2(0,0));\n            var pos2 = pokerNode.convertToNodeSpaceAR(pos1);\n            poker.setPosition(pos2);\n            var mto = cc.moveBy(0.15, cc.v2(pos3.x - pos1.x + 65,pos3.y - pos1.y));\n            var totation = cc.rotateTo(0.15,0);\n            var spawn = cc.spawn([mto,totation]);\n            poker.runAction(spawn);\n            poker.PreviousParent = poker.parent;\n            poker.parent = pokerNode;\n            poker.CurrentPosition = poker.PreviousPosition;\n            poker.PreviousPosition = cc.v2(0,0);\n            // 执行牌局回退\n\n\n        } else {\n            if (_this.CurrentPoker.node.childrenCount > 0) {\n                cc.log(\"我有孩子节点\");\n                // 执行旋转动画\n                var poker = _this.CurrentPoker.node.children[0];\n\n                // 先切换挂载的节点\n                var curPos1 = poker.convertToWorldSpaceAR(cc.v2(0,0));\n                var curPos3 = BackgroundView.convertToWorldSpaceAR(cc.v2(0,0));\n                poker.setPosition(cc.v2(curPos1.x - curPos3.x,curPos1.y - curPos3.y));\n                poker.PreviousParent = poker.parent;\n                poker.parent = BackgroundView;\n\n                var pos1 = poker.convertToWorldSpaceAR(cc.v2(0,0));\n                var pos2 = BackgroundView.convertToWorldSpaceAR(cc.v2(0,0));\n                var mto = cc.moveBy(0.15, cc.v2(pos2.x - pos1.x,pos2.y - pos1.y));\n                var totation = cc.rotateTo(0.15,17);\n                var spawn = cc.spawn([mto,totation]);\n                poker.runAction(spawn);\n                poker.getComponent(cc.Button).interactable = false;\n                poker.interactable = false;\n                var pos3 = poker.convertToWorldSpaceAR(cc.v2(0,0));\n                poker.PreviousPosition = poker.CurrentPosition;\n                poker.CurrentPosition = pos3;\n                // 执行牌局跟进\n                var mainJS = cc.find('Canvas').getComponent('GameSceneScript');\n                cc.log(mainJS.PokerInstanceBackground.node.children);\n                var frontPoker = mainJS.PokerInstanceBackground.node.children[mainJS.PokerInstanceBackground.node.childrenCount - 1];\n                cc.log(frontPoker);\n                mainJS.fanzhuan(frontPoker);\n            }\n        }\n    },\n\n    stashAnimation:function (staBut) {\n        if (condition) {\n            \n        }\n    }\n\n    // update (dt) {},\n});\n"]}