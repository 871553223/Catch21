{"version":3,"sources":["assets/Script/PokerPrefabScript.js"],"names":["cc","Class","Component","properties","BackgroundImage","type","Sprite","FrontImage","NumView","DecorsSmallView","DecorsBigView","PreviousPosition","Vec2","v2","CurrentPosition","PreviousParent","Node","PokerNumber","integer","PokerRealNumber","onLoad","start","InitPoker","node","onClick","mainJS","find","getComponent","currentNode","getChildByName","pokerInitBg","parent","CurrentPoker","log","PokerInstanceBackground","childrenCount","fanzhuan","pokernode","size","view","getVisibleSize","d1","delayTime","mto","moveTo","height","fan1","scaleTo","changeFront","callFunc","target","active","spawn","runAction","d2","fan2","sequ","sequence","dianshu","_this","num","decors","parseInt","decorsString","loader","loadRes","SpriteAtlas","err","atlas","spriteFrame","getSpriteFrame"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        BackgroundImage: {\n            type:cc.Sprite,\n            default:null\n        },\n\n        FrontImage: {\n            type:cc.Sprite,\n            default:null\n        },\n\n        NumView: {\n            type:cc.Sprite,\n            default:null\n        },\n        DecorsSmallView: {\n            type:cc.Sprite,\n            default:null\n        },\n        DecorsBigView: {\n            type:cc.Sprite,\n            default:null\n        },\n        PreviousPosition: {\n            type:cc.Vec2,\n            default:cc.v2(0,0)\n        },\n        CurrentPosition: {\n            type:cc.Vec2,\n            default:cc.v2(0,0),\n            // get () {\n            //     this._CurrentPosition;\n            // },\n            // set (value) {\n            //     this._CurrentPosition = value;\n            // }\n        },\n        PreviousParent: {\n            type:cc.Node,\n            default:null\n        },\n        PokerNumber: {\n            type:cc.integer,\n            default:0,\n            // get () {\n            //     cc.log(\"InitPokerGet\");\n            //     return this._PokerNumber;\n            // },\n            // set (value) {\n            //     cc.log(\"InitPokerSet\");\n            //     this._PokerNumber = value;\n            // }\n        },\n        PokerRealNumber: {\n            type:cc.integer,\n            default:0,\n        }\n        \n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n\n        \n\n    },\n\n    start () {\n\n        this.InitPoker(this.node.PokerNumber);\n    },\n\n    onClick:function() {\n        // this.fanzhuan(this.node);\n        // cc.log(cc.find('Canvas'));\n        var mainJS = cc.find('Canvas').getComponent('GameSceneScript');\n        var currentNode = cc.find('Canvas').getChildByName('CurrentPoker');\n        var pokerInitBg = cc.find('Canvas').getChildByName('PokerInstanceBackground');\n        // cc.log(cc.find('Canvas').getChildByName('CurrentPoker'));\n        // cc.log(cc.find('Canvas').getChildByName('PokerInstanceBackground'));\n        // cc.log(mainJS.CurrentPoker);\n        // cc.log(mainJS.CurrentPoker.node);\n\n        if (this.node.parent === mainJS.CurrentPoker.node) {\n            cc.log('GGGGGGGG');\n        } else if (this.node.parent === mainJS.PokerInstanceBackground.node) {\n            // 判断中间存放牌的位置，是否已被占用\n            if (mainJS.CurrentPoker.node.childrenCount >= 1) {\n                cc.log('FFFF');\n            } else {\n                mainJS.fanzhuan(this.node);\n            }\n        }\n\n        cc.log(this.node.parent);\n    },\n\n    fanzhuan:function(pokernode) {\n        let size = cc.view.getVisibleSize();\n        // 先反转90变正面数据，再反转-90回来，结束，整个过程移动牌面到指定位置\n        var d1 = cc.delayTime(0.01);\n        var mto = cc.moveTo(0.3, cc.v2(69,(-size.height / 2) + 95 + 160));\n        var fan1 = cc.scaleTo(0.3, 0.2, 1);\n        // var fan1 = cc.flipX(true);\n        var changeFront = cc.callFunc(function(target) {\n            target.getChildByName(\"FrontView\").active = true;\n            target.getChildByName(\"Background\").active = false;\n            // target.convertToWorldSpaceAR(cc.v2(0,0))\n        });\n        var spawn = cc.spawn([mto,fan1]);\n        pokernode.runAction(spawn);\n        var d2 = cc.delayTime(0.3);\n        var fan2 = cc.scaleTo(0.1, 1, 1);\n        var sequ = cc.sequence([d2,changeFront,fan2]);\n        pokernode.runAction(sequ);\n    },\n\n    InitPoker:function (dianshu) {\n        var _this = this;\n        var num = dianshu % 13;\n        if (num === 0) {\n            num = 13;\n        }\n        if (num >= 10) {\n            _this.node.PokerRealNumber = 10;\n        } else {\n            _this.node.PokerRealNumber = num;\n        }\n        var decors = parseInt(dianshu / 13);\n        var decorsString = '';\n        switch (decors) {\n            case 0:\n                cc.loader.loadRes('poker',cc.SpriteAtlas,function(err,atlas){\n                    if(err) {\n                        cc.log(err);\n                        return;\n                    }\n                    _this.NumView.spriteFrame = atlas.getSpriteFrame('solitaire_0_'+num);\n                    _this.DecorsSmallView.spriteFrame = atlas.getSpriteFrame('solitaire_small_2');\n                    _this.DecorsBigView.spriteFrame = atlas.getSpriteFrame('solitaire_big_2');\n                });\n                decorsString = \"红桃\"\n                break;\n            case 1:\n                cc.loader.loadRes('poker',cc.SpriteAtlas,function(err,atlas){\n                    if(err) {\n                        cc.log(err);\n                        return;\n                    }\n                    _this.NumView.spriteFrame = atlas.getSpriteFrame('solitaire_0_'+num);\n                    _this.DecorsSmallView.spriteFrame = atlas.getSpriteFrame('solitaire_small_0');\n                    _this.DecorsBigView.spriteFrame = atlas.getSpriteFrame('solitaire_big_0');\n                });\n                decorsString = \"方片\"\n                break;\n            case 2:\n                cc.loader.loadRes('poker',cc.SpriteAtlas,function(err,atlas){\n                    if(err) {\n                        cc.log(err);\n                        return;\n                    }\n                    _this.NumView.spriteFrame = atlas.getSpriteFrame('solitaire_1_'+num);\n                    _this.DecorsSmallView.spriteFrame = atlas.getSpriteFrame('solitaire_small_3');\n                    _this.DecorsBigView.spriteFrame = atlas.getSpriteFrame('solitaire_big_3');\n                });\n                decorsString = \"黑桃\"\n                break;\n            case 3:\n                cc.loader.loadRes('poker',cc.SpriteAtlas,function(err,atlas){\n                    if(err) {\n                        cc.log(err);\n                        return;\n                    }\n                    _this.NumView.spriteFrame = atlas.getSpriteFrame('solitaire_1_'+num);\n                    _this.DecorsSmallView.spriteFrame = atlas.getSpriteFrame('solitaire_small_1');\n                    _this.DecorsBigView.spriteFrame = atlas.getSpriteFrame('solitaire_big_1');\n                });\n                decorsString = \"草花\"\n                break;\n        \n            default:\n                break;\n        }\n        // cc.log(\"点数:\"+num+\"   \"+\"花色:\"+decorsString);\n        \n    }\n\n\n    // update (dt) {},\n});\n"]}