
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/TabbarScript.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'd4304ELgshDo7y4n4IyC8ry', 'TabbarScript');
// Script/TabbarScript.js

"use strict";

// Learn cc.Class:
//  - https://docs.cocos.com/creator/manual/en/scripting/class.html
// Learn Attribute:
//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html
// Learn life-cycle callbacks:
//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html
cc.Class({
  "extends": cc.Component,
  properties: {// foo: {
    //     // ATTRIBUTES:
    //     default: null,        // The default value will be used only when the component attaching
    //                           // to a node for the first time
    //     type: cc.SpriteFrame, // optional, default is typeof default
    //     serializable: true,   // optional, default is true
    // },
    // bar: {
    //     get () {
    //         return this._bar;
    //     },
    //     set (value) {
    //         this._bar = value;
    //     }
    // },
  },
  // LIFE-CYCLE CALLBACKS:
  // onLoad () {},
  start: function start() {},
  RebackAction: function RebackAction() {
    var mainJS = cc.find('Canvas').getComponent('GameSceneScript');

    if (mainJS.CurrentPoker.node.childrenCount >= 1) {
      var node = mainJS.CurrentPoker.node.children[0];
      mainJS.fanzhuan(node);
    }
  },
  PauseAction: function PauseAction() {
    cc.loader.loadRes("music/btn_click", cc.AudioClip, function (err, clip) {
      cc.audioEngine.play(clip, false, 0.5);
    });
    var mainCanvas = cc.find('Canvas');
    var mainJS = cc.find('Canvas').getComponent('GameSceneScript');
    mainJS.TimerPause = !mainJS.TimerPause;

    if (mainJS.TimerPause === true) {
      cc.audioEngine.pauseMusic();
      cc.audioEngine.pauseAllEffects();
    } else {
      cc.audioEngine.resumeMusic();
      cc.audioEngine.resumeAllEffects();
    }

    cc.log("yyy" + mainJS.TimerPause);
    var alertNode = cc.find('Canvas/PauseAlertView');

    if (alertNode != null) {
      alertNode.active = true;
    } else {
      var pauseAlert = cc.instantiate(mainJS.PauseAlertView);
      alertNode = pauseAlert;
      pauseAlert._name = "PauseAlertView";
      mainCanvas.addChild(pauseAlert);
    }

    var mask = cc.find('Canvas/PauseAlertView/bg').getComponent(cc.Sprite);
    alertNode.zIndex = 999;
    mask.Color = cc.Color(0, 0, 0, 0);
  },
  KeepPlayAction: function KeepPlayAction() {
    cc.loader.loadRes("music/btn_click", cc.AudioClip, function (err, clip) {
      cc.audioEngine.play(clip, false, 0.5);
    });
    var alertNode = cc.find('Canvas/PauseAlertView');

    if (alertNode != null) {
      alertNode.active = false;
      var mask = cc.find('Canvas/PauseAlertView/bg').getComponent(cc.Sprite);
      alertNode.zIndex = 999;
      mask.Color = cc.Color(0, 0, 0, 0);
    }

    var mainJS = cc.find('Canvas').getComponent('GameSceneScript');
    mainJS.TimerPause = !mainJS.TimerPause;

    if (mainJS.TimerPause === true) {
      cc.audioEngine.pauseMusic();
      cc.audioEngine.pauseAllEffects();
    } else {
      cc.audioEngine.resumeMusic();
      cc.audioEngine.resumeAllEffects();
    }
  },
  ReplayAction: function ReplayAction() {
    cc.loader.loadRes("music/btn_click", cc.AudioClip, function (err, clip) {
      cc.audioEngine.play(clip, false, 0.5);
    });
    cc.director.loadScene("GameScene", null);
  },
  OutMoveAction: function OutMoveAction() {
    var alertNode = cc.find('Canvas/OutMoveAlertView');

    if (alertNode != null && alertNode.active === true) {
      return;
    }

    if (alertNode != null) {
      alertNode.active = true;
    } else {
      var mainJS = cc.find('Canvas').getComponent('GameSceneScript');
      var mainCanvas = cc.find('Canvas');
      var gameOverAlert = cc.instantiate(mainJS.OutMoveAlertView);
      alertNode = gameOverAlert;
      gameOverAlert._name = "OutMoveAlertView";
      mainCanvas.addChild(gameOverAlert);
    }
  } // update (dt) {},

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvVGFiYmFyU2NyaXB0LmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwic3RhcnQiLCJSZWJhY2tBY3Rpb24iLCJtYWluSlMiLCJmaW5kIiwiZ2V0Q29tcG9uZW50IiwiQ3VycmVudFBva2VyIiwibm9kZSIsImNoaWxkcmVuQ291bnQiLCJjaGlsZHJlbiIsImZhbnpodWFuIiwiUGF1c2VBY3Rpb24iLCJsb2FkZXIiLCJsb2FkUmVzIiwiQXVkaW9DbGlwIiwiZXJyIiwiY2xpcCIsImF1ZGlvRW5naW5lIiwicGxheSIsIm1haW5DYW52YXMiLCJUaW1lclBhdXNlIiwicGF1c2VNdXNpYyIsInBhdXNlQWxsRWZmZWN0cyIsInJlc3VtZU11c2ljIiwicmVzdW1lQWxsRWZmZWN0cyIsImxvZyIsImFsZXJ0Tm9kZSIsImFjdGl2ZSIsInBhdXNlQWxlcnQiLCJpbnN0YW50aWF0ZSIsIlBhdXNlQWxlcnRWaWV3IiwiX25hbWUiLCJhZGRDaGlsZCIsIm1hc2siLCJTcHJpdGUiLCJ6SW5kZXgiLCJDb2xvciIsIktlZXBQbGF5QWN0aW9uIiwiUmVwbGF5QWN0aW9uIiwiZGlyZWN0b3IiLCJsb2FkU2NlbmUiLCJPdXRNb3ZlQWN0aW9uIiwiZ2FtZU92ZXJBbGVydCIsIk91dE1vdmVBbGVydFZpZXciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRSxDQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWZRLEdBSFA7QUFxQkw7QUFFQTtBQUVBQyxFQUFBQSxLQXpCSyxtQkF5QkksQ0FFUixDQTNCSTtBQTZCTEMsRUFBQUEsWUFB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bUQsVUFBU0MsR0FBVCxFQUFjQyxJQUFkLEVBQW9CO0FBQ25FbkIsTUFBQUEsRUFBRSxDQUFDb0IsV0FBSCxDQUFlQyxJQUFmLENBQW9CRixJQUFwQixFQUEwQixLQUExQixFQUFpQyxHQUFqQztBQUNILEtBRkQ7QUFHQW5CLElBQUFBLEVBQUUsQ0FBQzBDLFFBQUgsQ0FBWUMsU0FBWixDQUFzQixXQUF0QixFQUFrQyxJQUFsQztBQUNILEdBcEdJO0FBc0dMQyxFQUFBQSxhQUFhLEVBQUUseUJBQVk7QUFDdkIsUUFBSWYsU0FBUyxHQUFHN0IsRUFBRSxDQUFDTyxJQUFILENBQVEseUJBQVIsQ0FBaEI7O0FBQ0EsUUFBSXNCLFNBQVMsSUFBSSxJQUFiLElBQXFCQSxTQUFTLENBQUNDLE1BQVYsS0FBcUIsSUFBOUMsRUFBb0Q7QUFDaEQ7QUFDSDs7QUFDRCxRQUFJRCxTQUFTLElBQUksSUFBakIsRUFBdUI7QUFDbkJBLE1BQUFBLFNBQVMsQ0FBQ0MsTUFBVixHQUFtQixJQUFuQjtBQUNILEtBRkQsTUFFTztBQUNILFVBQUl4QixNQUFNLEdBQUdOLEVBQUUsQ0FBQ08sSUFBSCxDQUFRLFFBQVIsRUFBa0JDLFlBQWxCLENBQStCLGlCQUEvQixDQUFiO0FBQ0EsVUFBSWMsVUFBVSxHQUFHdEIsRUFBRSxDQUFDTyxJQUFILENBQVEsUUFBUixDQUFqQjtBQUNBLFVBQUlzQyxhQUFhLEdBQUc3QyxFQUFFLENBQUNnQyxXQUFILENBQWUxQixNQUFNLENBQUN3QyxnQkFBdEIsQ0FBcEI7QUFDQWpCLE1BQUFBLFNBQVMsR0FBR2dCLGFBQVo7QUFDQUEsTUFBQUEsYUFBYSxDQUFDWCxLQUFkLEdBQXNCLGtCQUF0QjtBQUNBWixNQUFBQSxVQUFVLENBQUNhLFFBQVgsQ0FBb0JVLGFBQXBCO0FBQ0g7QUFDSixHQXJISSxDQXdITDs7QUF4SEssQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTGVhcm4gY2MuQ2xhc3M6XG4vLyAgLSBodHRwczovL2RvY3MuY29jb3MuY29tL2NyZWF0b3IvbWFudWFsL2VuL3NjcmlwdGluZy9jbGFzcy5odG1sXG4vLyBMZWFybiBBdHRyaWJ1dGU6XG4vLyAgLSBodHRwczovL2RvY3MuY29jb3MuY29tL2NyZWF0b3IvbWFudWFsL2VuL3NjcmlwdGluZy9yZWZlcmVuY2UvYXR0cmlidXRlcy5odG1sXG4vLyBMZWFybiBsaWZlLWN5Y2xlIGNhbGxiYWNrczpcbi8vICAtIGh0dHBzOi8vZG9jcy5jb2Nvcy5jb20vY3JlYXRvci9tYW51YWwvZW4vc2NyaXB0aW5nL2xpZmUtY3ljbGUtY2FsbGJhY2tzLmh0bWxcblxuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgLy8gZm9vOiB7XG4gICAgICAgIC8vICAgICAvLyBBVFRSSUJVVEVTOlxuICAgICAgICAvLyAgICAgZGVmYXVsdDogbnVsbCwgICAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXG4gICAgICAgIC8vICAgICB0eXBlOiBjYy5TcHJpdGVGcmFtZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcbiAgICAgICAgLy8gICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXG4gICAgICAgIC8vIH0sXG4gICAgICAgIC8vIGJhcjoge1xuICAgICAgICAvLyAgICAgZ2V0ICgpIHtcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gdGhpcy5fYmFyO1xuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgIHNldCAodmFsdWUpIHtcbiAgICAgICAgLy8gICAgICAgICB0aGlzLl9iYXIgPSB2YWx1ZTtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSxcbiAgICB9LFxuXG4gICAgLy8gTElGRS1DWUNMRSBDQUxMQkFDS1M6XG5cbiAgICAvLyBvbkxvYWQgKCkge30sXG5cbiAgICBzdGFydCAoKSB7XG5cbiAgICB9LFxuXG4gICAgUmViYWNrQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG1haW5KUyA9IGNjLmZpbmQoJ0NhbnZhcycpLmdldENvbXBvbmVudCgnR2FtZVNjZW5lU2NyaXB0Jyk7XG4gICAgICAgIGlmIChtYWluSlMuQ3VycmVudFBva2VyLm5vZGUuY2hpbGRyZW5Db3VudCA+PSAxKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IG1haW5KUy5DdXJyZW50UG9rZXIubm9kZS5jaGlsZHJlblswXTtcbiAgICAgICAgICAgIG1haW5KUy5mYW56aHVhbihub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9LFxuICAgIFBhdXNlQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoXCJtdXNpYy9idG5fY2xpY2tcIiwgY2MuQXVkaW9DbGlwLCBmdW5jdGlvbihlcnIsIGNsaXApIHtcbiAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnBsYXkoY2xpcCwgZmFsc2UsIDAuNSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbWFpbkNhbnZhcyA9IGNjLmZpbmQoJ0NhbnZhcycpO1xuICAgICAgICB2YXIgbWFpbkpTID0gY2MuZmluZCgnQ2FudmFzJykuZ2V0Q29tcG9uZW50KCdHYW1lU2NlbmVTY3JpcHQnKTtcbiAgICAgICAgbWFpbkpTLlRpbWVyUGF1c2UgPSAhbWFpbkpTLlRpbWVyUGF1c2U7XG4gICAgICAgIGlmIChtYWluSlMuVGltZXJQYXVzZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGF1c2VNdXNpYygpO1xuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGF1c2VBbGxFZmZlY3RzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5yZXN1bWVNdXNpYygpO1xuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucmVzdW1lQWxsRWZmZWN0cygpO1xuICAgICAgICB9XG4gICAgICAgIGNjLmxvZyhcInl5eVwiK21haW5KUy5UaW1lclBhdXNlKTtcblxuICAgICAgICB2YXIgYWxlcnROb2RlID0gY2MuZmluZCgnQ2FudmFzL1BhdXNlQWxlcnRWaWV3Jyk7XG4gICAgICAgIGlmIChhbGVydE5vZGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgYWxlcnROb2RlLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgcGF1c2VBbGVydCA9IGNjLmluc3RhbnRpYXRlKG1haW5KUy5QYXVzZUFsZXJ0Vmlldyk7XG4gICAgICAgICAgICBhbGVydE5vZGUgPSBwYXVzZUFsZXJ0O1xuICAgICAgICAgICAgcGF1c2VBbGVydC5fbmFtZSA9IFwiUGF1c2VBbGVydFZpZXdcIjtcbiAgICAgICAgICAgIG1haW5DYW52YXMuYWRkQ2hpbGQocGF1c2VBbGVydCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciBtYXNrID0gY2MuZmluZCgnQ2FudmFzL1BhdXNlQWxlcnRWaWV3L2JnJykuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSk7XG4gICAgICAgIGFsZXJ0Tm9kZS56SW5kZXggPSA5OTk7XG4gICAgICAgIG1hc2suQ29sb3IgPSBjYy5Db2xvcigwLCAwLCAwLCAwKTtcbiAgICAgICAgXG4gICAgfSxcblxuICAgIEtlZXBQbGF5QWN0aW9uOiBmdW5jdGlvbigpIHtcblxuICAgICAgICBjYy5sb2FkZXIubG9hZFJlcyhcIm11c2ljL2J0bl9jbGlja1wiLCBjYy5BdWRpb0NsaXAsIGZ1bmN0aW9uKGVyciwgY2xpcCkge1xuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGxheShjbGlwLCBmYWxzZSwgMC41KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB2YXIgYWxlcnROb2RlID0gY2MuZmluZCgnQ2FudmFzL1BhdXNlQWxlcnRWaWV3Jyk7XG4gICAgICAgIGlmIChhbGVydE5vZGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgYWxlcnROb2RlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIG1hc2sgPSBjYy5maW5kKCdDYW52YXMvUGF1c2VBbGVydFZpZXcvYmcnKS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKTtcbiAgICAgICAgICAgIGFsZXJ0Tm9kZS56SW5kZXggPSA5OTk7XG4gICAgICAgICAgICBtYXNrLkNvbG9yID0gY2MuQ29sb3IoMCwgMCwgMCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB2YXIgbWFpbkpTID0gY2MuZmluZCgnQ2FudmFzJykuZ2V0Q29tcG9uZW50KCdHYW1lU2NlbmVTY3JpcHQnKTtcbiAgICAgICAgbWFpbkpTLlRpbWVyUGF1c2UgPSAhbWFpbkpTLlRpbWVyUGF1c2U7XG4gICAgICAgIGlmIChtYWluSlMuVGltZXJQYXVzZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGF1c2VNdXNpYygpO1xuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGF1c2VBbGxFZmZlY3RzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5yZXN1bWVNdXNpYygpO1xuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucmVzdW1lQWxsRWZmZWN0cygpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIFJlcGxheUFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNjLmxvYWRlci5sb2FkUmVzKFwibXVzaWMvYnRuX2NsaWNrXCIsIGNjLkF1ZGlvQ2xpcCwgZnVuY3Rpb24oZXJyLCBjbGlwKSB7XG4gICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5wbGF5KGNsaXAsIGZhbHNlLCAwLjUpO1xuICAgICAgICB9KTtcbiAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiR2FtZVNjZW5lXCIsbnVsbCk7XG4gICAgfSxcblxuICAgIE91dE1vdmVBY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFsZXJ0Tm9kZSA9IGNjLmZpbmQoJ0NhbnZhcy9PdXRNb3ZlQWxlcnRWaWV3Jyk7XG4gICAgICAgIGlmIChhbGVydE5vZGUgIT0gbnVsbCAmJiBhbGVydE5vZGUuYWN0aXZlID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFsZXJ0Tm9kZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBhbGVydE5vZGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBtYWluSlMgPSBjYy5maW5kKCdDYW52YXMnKS5nZXRDb21wb25lbnQoJ0dhbWVTY2VuZVNjcmlwdCcpO1xuICAgICAgICAgICAgdmFyIG1haW5DYW52YXMgPSBjYy5maW5kKCdDYW52YXMnKTtcbiAgICAgICAgICAgIHZhciBnYW1lT3ZlckFsZXJ0ID0gY2MuaW5zdGFudGlhdGUobWFpbkpTLk91dE1vdmVBbGVydFZpZXcpO1xuICAgICAgICAgICAgYWxlcnROb2RlID0gZ2FtZU92ZXJBbGVydDtcbiAgICAgICAgICAgIGdhbWVPdmVyQWxlcnQuX25hbWUgPSBcIk91dE1vdmVBbGVydFZpZXdcIjtcbiAgICAgICAgICAgIG1haW5DYW52YXMuYWRkQ2hpbGQoZ2FtZU92ZXJBbGVydCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIHVwZGF0ZSAoZHQpIHt9LFxufSk7XG4iXX0=